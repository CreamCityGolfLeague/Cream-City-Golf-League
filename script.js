const navToggle=document.getElementById('navToggle');const navLinks=document.getElementById('navLinks');navToggle?.addEventListener('click',()=>navLinks.classList.toggle('open'));
window.addEventListener('load',()=>{const o=document.getElementById('globalSpinner');setTimeout(()=>{o?.classList.remove('visible');},350);});
const revealEls=document.querySelectorAll('.reveal');const io=new IntersectionObserver(e=>{e.forEach(x=>{if(x.isIntersecting){x.target.classList.add('visible');io.unobserve(x.target);}})},{threshold:.15});revealEls.forEach(el=>io.observe(el));
const toTop=document.getElementById('toTop');window.addEventListener('scroll',()=>{if(window.scrollY>600){toTop.classList.add('visible');}else{toTop.classList.remove('visible');}});toTop?.addEventListener('click',()=>window.scrollTo({top:0,behavior:'smooth'}));
async function loadSchedule(){const spin=document.getElementById('scheduleSpin');const tableWrap=document.getElementById('scheduleTable');try{const res=await fetch('schedule.json?cache='+Date.now());const data=await res.json();const rows=data.map(item=>{const round=item.round===null?'':item.round;const label=item.type==='Championship'?'<strong>Championship</strong>':(item.type||'Regular');const dates=(item.start==='TBD')?'TBD':new Date(item.start).toLocaleDateString(undefined,{month:'short',day:'numeric'})+' â€“ '+new Date(item.end).toLocaleDateString(undefined,{month:'short',day:'numeric',year:'numeric'});return `<tr><td>${round}</td><td>${dates}</td><td>${item.course}</td><td>${label}</td></tr>`}).join('');const table=`<table><thead><tr><th>Round</th><th>Dates</th><th>Course</th><th>Type</th></tr></thead><tbody>${rows}</tbody></table>`;tableWrap.innerHTML=table;}catch(e){tableWrap.innerHTML='<p>Failed to load schedule.</p>';}finally{spin?.remove();tableWrap?.setAttribute('aria-busy','false');}}loadSchedule();